{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Tab}from'@headlessui/react';import{toast}from'react-hot-toast';import api from'../services/api';import CreateRaffleForm from'../components/admin/CreateRaffleForm';import RafflesList from'../components/admin/RafflesList';import Statistics from'../components/admin/Statistics';import CompletedRafflesList from'../components/admin/CompletedRafflesList';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function classNames(){for(var _len=arguments.length,classes=new Array(_len),_key=0;_key<_len;_key++){classes[_key]=arguments[_key];}return classes.filter(Boolean).join(' ');}const AdminPanel=()=>{const[statistics,setStatistics]=useState(null);const[activeRaffles,setActiveRaffles]=useState([]);const[completedRaffles,setCompletedRaffles]=useState([]);// Эта строка должна быть ВНУТРИ компонента!\nconst[loading,setLoading]=useState(true);useEffect(()=>{loadData();},[]);const loadData=async()=>{try{const[statsRes,activeRes,completedRes]=await Promise.all([api.get('/admin/statistics'),api.get('/raffles/active'),api.get('/raffles/completed?limit=50')]);setStatistics(statsRes.data);setActiveRaffles(activeRes.data);setCompletedRaffles(completedRes.data);}catch(error){toast.error('Ошибка загрузки данных');}finally{setLoading(false);}};const tabs=[{name:'Статистика',component:Statistics},{name:'Создать розыгрыш',component:CreateRaffleForm},{name:'Активные розыгрыши',component:RafflesList},{name:'Завершённые розыгрыши',component:CompletedRafflesList}];if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 mb-6\",children:\"\\u041F\\u0430\\u043D\\u0435\\u043B\\u044C \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0430\"}),/*#__PURE__*/_jsxs(Tab.Group,{children:[/*#__PURE__*/_jsx(Tab.List,{className:\"flex space-x-1 rounded-xl bg-blue-900/20 p-1 mb-6\",children:tabs.map(tab=>/*#__PURE__*/_jsx(Tab,{className:_ref=>{let{selected}=_ref;return classNames('w-full rounded-lg py-2.5 text-sm font-medium leading-5','ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2',selected?'bg-white text-blue-700 shadow':'text-blue-100 hover:bg-white/[0.12] hover:text-white');},children:tab.name},tab.name))}),/*#__PURE__*/_jsxs(Tab.Panels,{children:[/*#__PURE__*/_jsx(Tab.Panel,{children:/*#__PURE__*/_jsx(Statistics,{statistics:statistics})}),/*#__PURE__*/_jsx(Tab.Panel,{children:/*#__PURE__*/_jsx(CreateRaffleForm,{onSuccess:loadData})}),/*#__PURE__*/_jsx(Tab.Panel,{children:/*#__PURE__*/_jsx(RafflesList,{raffles:activeRaffles,onUpdate:loadData})}),/*#__PURE__*/_jsx(Tab.Panel,{children:/*#__PURE__*/_jsx(CompletedRafflesList,{raffles:completedRaffles,onUpdate:loadData})})]})]})]})});};export default AdminPanel;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}