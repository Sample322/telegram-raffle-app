{"ast":null,"code":"import React,{useState}from'react';import{toast}from'react-hot-toast';import{EyeIcon,XMarkIcon,ClockIcon,UsersIcon,TrashIcon// ← добавьте эту строку\n}from'@heroicons/react/24/outline';import api from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RafflesList=_ref=>{let{raffles,onUpdate}=_ref;const[loading,setLoading]=useState({});const handleEndRaffle=async raffleId=>{if(!window.confirm('Вы уверены, что хотите завершить этот розыгрыш?')){return;}setLoading(prev=>({...prev,[raffleId]:true}));try{await api.patch(`/admin/raffles/${raffleId}/end`);toast.success('Розыгрыш будет завершен в ближайшее время');if(onUpdate)onUpdate();}catch(error){toast.error('Ошибка при завершении розыгрыша');}finally{setLoading(prev=>({...prev,[raffleId]:false}));}};const handleDeleteRaffle=async raffleId=>{if(!window.confirm('Удалить этот розыгрыш безвозвратно?'))return;setLoading(prev=>({...prev,[`delete_${raffleId}`]:true}));try{await api.delete(`/admin/raffles/${raffleId}`);toast.success('Розыгрыш удалён');onUpdate&&onUpdate();}catch(e){toast.error('Не удалось удалить розыгрыш');}finally{setLoading(prev=>({...prev,[`delete_${raffleId}`]:false}));}};const formatDate=dateString=>{const date=new Date(dateString);return date.toLocaleString('ru-RU',{day:'numeric',month:'long',year:'numeric',hour:'2-digit',minute:'2-digit'});};if(raffles.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-lg p-8 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u041D\\u0435\\u0442 \\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0445 \\u0440\\u043E\\u0437\\u044B\\u0433\\u0440\\u044B\\u0448\\u0435\\u0439\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:raffles.map(raffle=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-2\",children:raffle.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-gray-600 mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0414\\u043E: \",formatDate(raffle.end_date)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(UsersIcon,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[raffle.participants_count||0,\" \\u0443\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u043E\\u0432\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm\",children:\"\\u0410\\u043A\\u0442\\u0438\\u0432\\u0435\\u043D\"}),raffle.draw_started&&/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm\",children:\"\\u0420\\u043E\\u0437\\u044B\\u0433\\u0440\\u044B\\u0448 \\u0437\\u0430\\u043F\\u0443\\u0449\\u0435\\u043D\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"a\",{href:`/raffle/${raffle.id}`,target:\"_blank\",rel:\"noopener noreferrer\",className:\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\",title:\"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\",children:/*#__PURE__*/_jsx(EyeIcon,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEndRaffle(raffle.id),disabled:loading[raffle.id],className:\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50\",title:\"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u044C \\u0434\\u043E\\u0441\\u0440\\u043E\\u0447\\u043D\\u043E\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteRaffle(raffle.id),disabled:loading['delete_'+raffle.id],className:\"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50\",title:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-5 w-5\"})})]})]})},raffle.id))});};export default RafflesList;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}