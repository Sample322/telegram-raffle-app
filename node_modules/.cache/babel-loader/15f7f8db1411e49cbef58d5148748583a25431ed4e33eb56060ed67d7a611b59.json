{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import{ArrowLeftIcon}from'@heroicons/react/24/outline';import api from'../services/api';import{formatToMoscowTime}from'../utils/dateUtils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RaffleHistoryPage=()=>{const{id}=useParams();const[raffle,setRaffle]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{loadRaffleHistory();},[id]);const loadRaffleHistory=async()=>{try{// Get completed raffles and find the one we need\nconst response=await api.get('/raffles/completed');const foundRaffle=response.data.find(r=>r.id===parseInt(id));setRaffle(foundRaffle);}catch(error){console.error('Error loading raffle history:',error);}finally{setLoading(false);}};const formatDate=dateString=>{return formatToMoscowTime(dateString);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"})});}if(!raffle){return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-6\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500\",children:\"\\u0420\\u043E\\u0437\\u044B\\u0433\\u0440\\u044B\\u0448 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\"})});}const getMedalEmoji=position=>{const medals={1:'🥇',2:'🥈',3:'🥉'};return medals[position]||'🏅';};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-4\",children:/*#__PURE__*/_jsxs(Link,{to:\"/\",className:\"inline-flex items-center text-blue-600 hover:text-blue-800\",children:[/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"h-5 w-5 mr-2\"}),\"\\u041D\\u0430\\u0437\\u0430\\u0434 \\u043A \\u0440\\u043E\\u0437\\u044B\\u0433\\u0440\\u044B\\u0448\\u0430\\u043C\"]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 mb-4\",children:raffle.title}),raffle.photo_url&&/*#__PURE__*/_jsx(\"img\",{src:raffle.photo_url,alt:raffle.title,className:\"w-full max-w-2xl mx-auto h-64 object-cover rounded-lg mb-6\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-700 mb-2\",children:\"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u043E \\u0440\\u043E\\u0437\\u044B\\u0433\\u0440\\u044B\\u0448\\u0435\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u043F\\u0440\\u043E\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u044F:\"}),\" \",formatDate(raffle.end_date)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0443\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u043E\\u0432:\"}),\" \",raffle.participants_count]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043F\\u0440\\u0438\\u0437\\u043E\\u0432:\"}),\" \",raffle.winners.length]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-700 mb-2\",children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 whitespace-pre-wrap\",children:raffle.description})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-6\",children:\"\\uD83C\\uDFC6 \\u041F\\u043E\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u043B\\u0438 \\u0440\\u043E\\u0437\\u044B\\u0433\\u0440\\u044B\\u0448\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:raffle.winners.map(winner=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-4xl\",children:getMedalEmoji(winner.position)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-semibold text-gray-800\",children:[winner.position,\" \\u043C\\u0435\\u0441\\u0442\\u043E\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700 font-medium\",children:winner.prize})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1\",children:[/*#__PURE__*/_jsxs(\"a\",{href:`https://t.me/${winner.user.username}`,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-600 hover:underline\",children:[\"@\",winner.user.username]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600 ml-2\",children:[\"(\",winner.user.first_name,\" \",winner.user.last_name||'',\")\"]})]})]})]},winner.position))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-blue-50 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-blue-600\",children:raffle.participants_count}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-700\",children:\"\\u0443\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u043E\\u0432\"})]})]})]});};export default RaffleHistoryPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}