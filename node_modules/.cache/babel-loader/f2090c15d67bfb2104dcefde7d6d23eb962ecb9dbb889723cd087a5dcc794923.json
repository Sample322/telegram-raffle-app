{"ast":null,"code":"// frontend/src/components/RaffleCard.js - ОБНОВЛЕННЫЙ ФАЙЛ\nimport React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import Countdown from'react-countdown';import{CheckCircleIcon}from'@heroicons/react/24/solid';import api from'../services/api';import{formatToMoscowTime}from'../utils/dateUtils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RaffleCard=_ref=>{let{raffle}=_ref;const[isParticipating,setIsParticipating]=useState(false);const[loading,setLoading]=useState(true);useEffect(()=>{var _window$Telegram,_window$Telegram$WebA;// Проверяем участие только если есть авторизация\nif((_window$Telegram=window.Telegram)!==null&&_window$Telegram!==void 0&&(_window$Telegram$WebA=_window$Telegram.WebApp)!==null&&_window$Telegram$WebA!==void 0&&_window$Telegram$WebA.initData&&window.Telegram.WebApp.initData!==''){checkParticipation();}else{setLoading(false);}},[raffle.id]);const checkParticipation=async()=>{try{const response=await api.get(`/raffles/${raffle.id}/check-participation`);setIsParticipating(response.data.is_participating);}catch(error){console.error('Error checking participation:',error);}finally{setLoading(false);}};const CountdownRenderer=_ref2=>{let{days,hours,minutes,seconds,completed}=_ref2;if(completed){return/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 font-semibold\",children:\"\\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043D\"});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-gray-800\",children:days}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-600\",children:\"\\u0434\\u043D\\u0435\\u0439\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-gray-800\",children:hours}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-600\",children:\"\\u0447\\u0430\\u0441\\u043E\\u0432\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-gray-800\",children:minutes}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-600\",children:\"\\u043C\\u0438\\u043D\\u0443\\u0442\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-bold text-gray-800\",children:seconds}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-600\",children:\"\\u0441\\u0435\\u043A\\u0443\\u043D\\u0434\"})]})]});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300\",children:[raffle.photo_url&&/*#__PURE__*/_jsx(\"div\",{className:\"h-48 overflow-hidden\",children:/*#__PURE__*/_jsx(\"img\",{src:raffle.photo_url,alt:raffle.title,className:\"w-full h-full object-cover\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-2\",children:raffle.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:\"\\u041F\\u0440\\u0438\\u0437\\u044B:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[Object.entries(raffle.prizes).slice(0,3).map(_ref3=>{let[position,prize]=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-gray-700\",children:[position,\" \\u043C\\u0435\\u0441\\u0442\\u043E:\"]}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:prize})]},position);}),Object.keys(raffle.prizes).length>3&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 italic\",children:[\"\\u0438 \\u0435\\u0449\\u0435 \",Object.keys(raffle.prizes).length-3,\" \\u043F\\u0440\\u0438\\u0437(\\u043E\\u0432)...\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"\\u0414\\u043E: \",formatToMoscowTime(raffle.end_date)]}),/*#__PURE__*/_jsx(Countdown,{date:new Date(raffle.end_date),renderer:CountdownRenderer})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"\\u0423\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u043E\\u0432:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-gray-800\",children:raffle.participants_count||0})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"h-10 bg-gray-200 animate-pulse rounded\"}):/*#__PURE__*/_jsx(Link,{to:`/raffle/${raffle.id}`,className:\"block w-full text-center bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors duration-200 font-medium\",children:isParticipating?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center justify-center space-x-2\",children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u041F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435 (\\u0432\\u044B \\u0443\\u0447\\u0430\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442\\u0435)\"})]}):'Участвовать'})]})]});};export default RaffleCard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}