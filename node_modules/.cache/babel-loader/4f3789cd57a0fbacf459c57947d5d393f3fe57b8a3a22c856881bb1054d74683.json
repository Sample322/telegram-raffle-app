{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{CogIcon}from'@heroicons/react/24/outline';import api from'../services/api';import RaffleCard from'../components/RaffleCard';import CompletedRaffleCard from'../components/CompletedRaffleCard';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function HomePage(){const[activeRaffles,setActiveRaffles]=useState([]);const[completedRaffles,setCompletedRaffles]=useState([]);const[loading,setLoading]=useState(true);const{isAdmin}=useAuth();const navigate=useNavigate();useEffect(()=>{loadRaffles();},[]);const loadRaffles=async()=>{try{const[activeRes,completedRes]=await Promise.all([api.get('/raffles/active'),api.get('/raffles/completed?limit=10')]);// Дополнительная фильтрация на клиенте для уверенности\nconst now=new Date();const filteredActive=activeRes.data.filter(raffle=>{const endDate=new Date(raffle.end_date);return!raffle.is_completed&&raffle.is_active&&endDate>now;});setActiveRaffles(filteredActive);setCompletedRaffles(completedRes.data);}catch(error){console.error('Error loading raffles:',error);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800\",children:\"\\uD83C\\uDF89 \\u0420\\u043E\\u0437\\u044B\\u0433\\u0440\\u044B\\u0448\\u0438\"}),isAdmin&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/admin'),className:\"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(CogIcon,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0410\\u0434\\u043C\\u0438\\u043D-\\u043F\\u0430\\u043D\\u0435\\u043B\\u044C\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-700 mb-4\",children:\"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0435 \\u0440\\u043E\\u0437\\u044B\\u0433\\u0440\\u044B\\u0448\\u0438\"}),activeRaffles.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\",children:activeRaffles.map(raffle=>/*#__PURE__*/_jsx(RaffleCard,{raffle:raffle},raffle.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-6 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u041D\\u0435\\u0442 \\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0445 \\u0440\\u043E\\u0437\\u044B\\u0433\\u0440\\u044B\\u0448\\u0435\\u0439\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-700 mb-4\",children:\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F \\u0440\\u043E\\u0437\\u044B\\u0433\\u0440\\u044B\\u0448\\u0435\\u0439\"}),completedRaffles.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:completedRaffles.map(raffle=>/*#__PURE__*/_jsx(CompletedRaffleCard,{raffle:raffle},raffle.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-6 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F \\u0440\\u043E\\u0437\\u044B\\u0433\\u0440\\u044B\\u0448\\u0435\\u0439 \\u043F\\u0443\\u0441\\u0442\\u0430\"})})]})]});}export default HomePage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}